{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst startBtn = document.querySelector('[data-start]');\r\nconst inputField = document.getElementById('datetime-picker');\r\nconst day = document.querySelector('[data-days]');\r\nconst hour = document.querySelector('[data-hours]');\r\nconst minute = document.querySelector('[data-minutes]');\r\nconst second = document.querySelector('[data-seconds]');\r\n\r\nlet ms = null;\r\nlet intervalId = null;\r\n\r\nstartBtn.setAttribute('disabled', 'true');\r\n\r\nconst options = {\r\n  enableTime: true,\r\n  time_24hr: true,\r\n  defaultDate: new Date(),\r\n  minuteIncrement: 1,\r\n  onClose(selectedDates) {\r\n    let date = new Date();\r\n    if (selectedDates[0].getTime() < date.getTime()) {\r\n      iziToast.error({\r\n        title: 'Error',\r\n        message: 'Please choose a date in the future',\r\n        position: 'topRight',\r\n        color: '#eb1d1d',\r\n        messageColor: '#ffffff',\r\n        titleColor: '#ffffff',\r\n        iconColor: '#ffffff',\r\n      });\r\n      return;\r\n    }\r\n    startBtn.removeAttribute('disabled');\r\n    ms = selectedDates[0].getTime();\r\n  },\r\n};\r\n\r\nstartBtn.addEventListener('click', onClickHandler);\r\n\r\nfunction onClickHandler() {\r\n  startBtn.setAttribute('disabled', 'true');\r\n  inputField.setAttribute('disabled', 'true');\r\n  intervalId = setInterval(() => {\r\n    const currentDate = new Date().getTime();\r\n    const timeMs = ms - currentDate;\r\n    if (timeMs <= 0) {\r\n      clearInterval(intervalId);\r\n      inputField.removeAttribute('disabled');\r\n      return;\r\n    }\r\n\r\n    const { days, hours, minutes, seconds } = convertMs(timeMs);\r\n\r\n    day.textContent = addLeadingZero(days);\r\n    hour.textContent = addLeadingZero(hours);\r\n    minute.textContent = addLeadingZero(minutes);\r\n    second.textContent = addLeadingZero(seconds);\r\n  }, 1000);\r\n}\r\n\r\nflatpickr(inputField, options);\r\n\r\nfunction convertMs(ms) {\r\n  // Number of milliseconds per unit of time\r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  // Remaining days\r\n  const days = Math.floor(ms / day);\r\n  // Remaining hours\r\n  const hours = Math.floor((ms % day) / hour);\r\n  // Remaining minutes\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  // Remaining seconds\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}\r\nfunction addLeadingZero(value) {\r\n  return value.toString().padStart(2, '0');\r\n}\r\n"],"names":["startBtn","inputField","day","hour","minute","second","ms","intervalId","options","selectedDates","date","iziToast","onClickHandler","currentDate","timeMs","days","hours","minutes","seconds","convertMs","addLeadingZero","flatpickr","value"],"mappings":"+IAKA,MAAMA,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAa,SAAS,eAAe,iBAAiB,EACtDC,EAAM,SAAS,cAAc,aAAa,EAC1CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAS,SAAS,cAAc,gBAAgB,EAEtD,IAAIC,EAAK,KACLC,EAAa,KAEjBP,EAAS,aAAa,WAAY,MAAM,EAExC,MAAMQ,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,IAAIC,EAAO,IAAI,KACf,GAAID,EAAc,GAAG,QAAO,EAAKC,EAAK,UAAW,CAC/CC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACV,MAAO,UACP,aAAc,UACd,WAAY,UACZ,UAAW,SACnB,CAAO,EACD,MACD,CACDX,EAAS,gBAAgB,UAAU,EACnCM,EAAKG,EAAc,GAAG,QAAO,CAC9B,CACH,EAEAT,EAAS,iBAAiB,QAASY,CAAc,EAEjD,SAASA,GAAiB,CACxBZ,EAAS,aAAa,WAAY,MAAM,EACxCC,EAAW,aAAa,WAAY,MAAM,EAC1CM,EAAa,YAAY,IAAM,CAC7B,MAAMM,EAAc,IAAI,KAAM,EAAC,QAAO,EAChCC,EAASR,EAAKO,EACpB,GAAIC,GAAU,EAAG,CACf,cAAcP,CAAU,EACxBN,EAAW,gBAAgB,UAAU,EACrC,MACD,CAED,KAAM,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAM,EAE1DZ,EAAI,YAAckB,EAAeL,CAAI,EACrCZ,EAAK,YAAciB,EAAeJ,CAAK,EACvCZ,EAAO,YAAcgB,EAAeH,CAAO,EAC3CZ,EAAO,YAAce,EAAeF,CAAO,CAC5C,EAAE,GAAI,CACT,CAEAG,EAAUpB,EAAYO,CAAO,EAE7B,SAASW,EAAUb,EAAI,CAQrB,MAAMS,EAAO,KAAK,MAAMT,EAAK,KAAG,EAE1BU,EAAQ,KAAK,MAAOV,EAAK,MAAO,IAAI,EAEpCW,EAAU,KAAK,MAAQX,EAAK,MAAO,KAAQ,GAAM,EAEjDY,EAAU,KAAK,MAASZ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAS,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACA,SAASE,EAAeE,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC"}